'use client';
var jsxRuntime = require('react/jsx-runtime');
var actions12s = require('./actions-12s-CuAyAEDg.cjs');
var code12s = require('./code-12s-vkKHPvB4.cjs');
var context12s = require('./context-12s-Bd_RtAfM.cjs');
var document12s = require('./document-12s-BQSwLuao.cjs');
var lucideReact = require('lucide-react');
var badge12s = require('./badge-12s-DSyu4bRQ.cjs');

const IconMap = {
    code: lucideReact.FileCode,
    document: lucideReact.FileText
};
function ArtifactCard({ data }) {
    const { openArtifactInCanvas, getArtifactVersion, restoreArtifact, displayedArtifact } = context12s.useChatCanvas();
    const { versionNumber, isLatest } = getArtifactVersion(data);
    const Icon = IconMap[data.type];
    const title = getCardTitle(data);
    const isDisplayed = displayedArtifact && actions12s.isEqualArtifact(data, displayedArtifact);
    return /*#__PURE__*/ jsxRuntime.jsxs("div", {
        className: actions12s.cn('border-border flex w-full max-w-72 cursor-pointer items-center justify-between gap-2 rounded-lg border-2 p-2 hover:border-blue-500', isDisplayed && 'border-blue-500'),
        onClick: ()=>openArtifactInCanvas(data),
        children: [
            /*#__PURE__*/ jsxRuntime.jsxs("div", {
                className: "flex flex-1 items-center gap-2",
                children: [
                    /*#__PURE__*/ jsxRuntime.jsx(Icon, {
                        className: "size-7 shrink-0 text-blue-500"
                    }),
                    /*#__PURE__*/ jsxRuntime.jsxs("div", {
                        className: "flex flex-col",
                        children: [
                            /*#__PURE__*/ jsxRuntime.jsxs("div", {
                                className: "text-sm font-semibold",
                                children: [
                                    "Version ",
                                    versionNumber
                                ]
                            }),
                            title && /*#__PURE__*/ jsxRuntime.jsx("div", {
                                className: "text-xs text-gray-600",
                                children: title
                            })
                        ]
                    })
                ]
            }),
            isLatest ? /*#__PURE__*/ jsxRuntime.jsx(badge12s.Badge, {
                className: "ml-2 bg-blue-500 hover:bg-blue-600",
                children: "Latest"
            }) : /*#__PURE__*/ jsxRuntime.jsx(actions12s.Button, {
                variant: "ghost",
                size: "sm",
                className: "h-8 shrink-0 cursor-pointer text-xs",
                onClick: (e)=>{
                    e.stopPropagation();
                    restoreArtifact(data);
                },
                children: "Restore"
            })
        ]
    });
}
const getCardTitle = (artifact)=>{
    if (artifact.type === 'code') {
        const { file_name } = artifact.data;
        return file_name;
    }
    if (artifact.type === 'document') {
        const { title } = artifact.data;
        return title;
    }
    return '';
};

function ChatCanvas({ children, className }) {
    const { isCanvasOpen, displayedArtifact } = context12s.useChatCanvas();
    if (!isCanvasOpen || !displayedArtifact) return null;
    return /*#__PURE__*/ jsxRuntime.jsx("div", {
        className: actions12s.cn('right-0 top-0 flex h-full w-3/5 shrink-0 flex-col border-l bg-white', className),
        style: {
            animation: isCanvasOpen ? 'slideIn 0.3s ease-out forwards' : 'slideOut 0.3s ease-out forwards'
        },
        children: children != null ? children : /*#__PURE__*/ jsxRuntime.jsxs(jsxRuntime.Fragment, {
            children: [
                /*#__PURE__*/ jsxRuntime.jsx(code12s.CodeArtifactViewer, {}),
                /*#__PURE__*/ jsxRuntime.jsx(document12s.DocumentArtifactViewer, {})
            ]
        })
    });
}
ChatCanvas.CodeArtifact = code12s.CodeArtifactViewer;
ChatCanvas.DocumentArtifact = document12s.DocumentArtifactViewer;
ChatCanvas.Artifact = ArtifactCard;
ChatCanvas.Actions = actions12s.ChatCanvasActions;

exports.ChatCanvas = ChatCanvas;
